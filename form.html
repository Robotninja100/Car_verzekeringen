<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uitgebreid Offerteformulier Tijdelijke CAR-Verzekering (Multi-Step) | [Uw Bedrijfsnaam]</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap');

        :root {
            /* Variabelen van car_site.html (gebruikt door header) */
            --primary-color: #0A2463; /* Diep Blauw */
            --secondary-color: #3E92CC; /* Medium Blauw */
            --accent-color: #FFC947; /* Geel/Goud */
            --light-accent-color: #FFEEB8; /* Licht Geel */
            --text-color: #333333;
            --light-text-color: #FFFFFF;
            --background-color: #FFFFFF; /* Gebruikt door header achtergrond */
            --light-gray-color: #F4F4F8;
            --border-color: #DDDDDD;
            --box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            --box-shadow-hover: 0 6px 20px rgba(0, 0, 0, 0.12);
            --box-shadow-strong: 0 8px 25px rgba(0, 0, 0, 0.15);
            --border-radius: 10px;
            --transition-speed: 0.3s;
            --transition-speed-fast: 0.2s;

            /* Variabelen specifiek voor Offerte.html formulier */
            --form-bg-color: #ffffff;
            --form-border-color: #d1d5db;
            --form-focus-border-color: #3b82f6;
            --form-text-color: #1f2937;
            --form-label-color: #374151;
            --form-section-bg-color: #f9fafb;
            --form-button-bg-color: #2563eb;
            --form-button-hover-bg-color: #1d4ed8;
            --form-button-secondary-bg-color: #6b7280;
            --form-button-secondary-hover-bg-color: #4b5563;
            --form-button-text-color: #ffffff;
            --danger-color: #dc2626;
            --progress-bar-bg: #e5e7eb;
            --progress-bar-fill: #3b82f6;
            --progress-step-active-bg: #3b82f6;
            --progress-step-inactive-bg: #9ca3af;
            --progress-step-text-color: #ffffff;
            --conditional-bg-color: rgba(59, 130, 246, 0.03);
            --conditional-border-color: rgba(59, 130, 246, 0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Open Sans', sans-serif; /* Default font for form page */
            background-color: #e5e7eb; /* Page background for form area */
            color: var(--form-text-color); /* Default text color for form elements */
            line-height: 1.6;
            /* padding: 20px; */ /* Verwijderd voor full-width header */
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            overflow-x: hidden; /* Voorkom horizontale scrollbars */
        }

        /* Header Styles (from car_site.html) */
        header#mainHeader { /* Specific selector for offerte page header */
            font-family: 'Poppins', sans-serif; /* Ensure header uses Poppins */
            background-color: var(--background-color);
            padding: 1rem 0;
            border-bottom: 1px solid transparent;
            position: sticky;
            top: 0;
            z-index: 1000;
            width: 100%; /* Ensure full width */
            transition: box-shadow var(--transition-speed) ease, border-color var(--transition-speed) ease;
        }

        header#mainHeader.scrolled {
            box-shadow: var(--box-shadow);
            border-bottom: 1px solid var(--border-color);
        }

        /* Container for header content */
        header#mainHeader .container {
            width: 90%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.9rem;
            font-weight: 700;
            color: var(--primary-color);
            text-decoration: none;
            letter-spacing: -1px;
        }

        header#mainHeader nav ul {
            list-style: none;
            display: flex;
        }

        header#mainHeader nav ul li {
            margin-left: 30px;
        }

        header#mainHeader nav ul li a {
            text-decoration: none;
            color: var(--primary-color);
            font-weight: 500;
            padding: 8px 0px;
            position: relative;
            transition: color var(--transition-speed-fast) ease;
        }

        header#mainHeader nav ul li a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: var(--accent-color);
            transition: width var(--transition-speed) ease;
        }

        header#mainHeader nav ul li a:hover,
        header#mainHeader nav ul li a.active {
            color: var(--secondary-color);
            font-weight: 600;
        }
        header#mainHeader nav ul li a:hover::after,
        header#mainHeader nav ul li a.active::after {
            width: 100%;
        }
        /* End of Header Styles */


        .form-container {
            background-color: var(--form-bg-color);
            padding: 20px 30px 30px 30px;
            border-radius: 8px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 900px;
            /* margin-top: 20px; */ /* Wordt nu geregeld door progress-bar-container margin */
        }

        .form-container h1 {
            text-align: center; color: var(--form-text-color);
            margin-bottom: 10px; font-size: 1.7rem;
        }
        .form-container .form-intro {
            text-align: center; color: var(--form-label-color);
            margin-bottom: 25px; font-size: 0.9rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 100%; max-width: 900px; margin-bottom: 20px;
            background-color: var(--form-bg-color); padding: 15px 20px;
            border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            margin-top: 20px; /* Added margin to clear sticky header, adjust if header height changes */
        }
        .progress-bar {
            display: flex; justify-content: space-between; align-items: center;
            position: relative; height: 30px;
        }
        .progress-bar::before {
            content: ''; position: absolute; top: 50%; left: 0;
            transform: translateY(-50%); height: 4px; width: 100%;
            background-color: var(--progress-bar-bg); z-index: 1;
        }
        .progress-line {
            position: absolute; top: 50%; left: 0; transform: translateY(-50%);
            height: 4px; background-color: var(--progress-bar-fill); z-index: 2;
            width: 0%; transition: width 0.4s ease;
        }
        .progress-step {
            width: 30px; height: 30px; background-color: var(--progress-step-inactive-bg);
            color: var(--progress-step-text-color); border-radius: 50%;
            display: flex; justify-content: center; align-items: center;
            font-weight: bold; font-size: 0.9rem; z-index: 3; position: relative;
            border: 3px solid var(--form-bg-color); transition: background-color 0.4s ease, transform 0.3s ease;
        }
        .progress-step.active {
            background-color: var(--progress-step-active-bg); transform: scale(1.15);
        }
        .progress-step.completed {
             background-color: var(--progress-bar-fill);
             border-color: var(--progress-bar-fill);
        }
        .progress-step.completed::after {
            content: '\2713';
            font-size: 1.1rem;
            color: white;
        }

        .progress-step span.tooltip-text {
            visibility: hidden; width: 140px; background-color: #333; color: #fff;
            text-align: center; border-radius: 6px; padding: 6px 0;
            position: absolute; z-index: 4; bottom: 130%; left: 50%;
            margin-left: -70px; opacity: 0; transition: opacity 0.3s; font-size: 0.8rem;
        }
        .progress-step:hover span.tooltip-text { visibility: visible; opacity: 1; }
        .progress-step .step-number {
             display: inline-block;
        }
        .progress-step.completed .step-number {
            display: none;
        }


        fieldset.form-step {
            border: none;
            padding: 15px 5px 5px 5px;
            margin-bottom: 0;
            background-color: var(--form-bg-color);
            display: none;
            position: relative; /* Kan blijven, schaadt niet als help-tips inline zijn */
        }
        fieldset.form-step.active { display: block; animation: fadeInStep 0.5s ease-in-out; }
        @keyframes fadeInStep {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        legend {
            font-size: 1.4rem; font-weight: 700; color: var(--form-text-color);
            padding: 0; margin-bottom: 20px; width: 100%;
            border-bottom: 2px solid var(--form-focus-border-color); padding-bottom: 8px;
        }

        .form-group { margin-bottom: 20px; }
        .form-group label {
            display: block; font-weight: 600; color: var(--form-label-color);
            margin-bottom: 8px; font-size: 0.9rem;
        }
        .form-group label.radio-label, .form-group label.checkbox-label {
            display: inline-block; font-weight: normal; margin-right: 12px;
            margin-bottom: 0; margin-left: 4px; font-size: 0.95rem;
        }
        .input-group { display: flex; align-items: center; }
        .input-group .currency-symbol, .input-group .unit-symbol {
            padding: 10px 12px; background-color: #e9ecef;
            border: 1px solid var(--form-border-color); border-right: none;
            border-radius: 4px 0 0 4px; color: var(--form-label-color); font-size:0.9rem;
        }
        .input-group input[type="text"], .input-group input[type="number"] {
            border-radius: 0 4px 4px 0 !important;
        }

        input[type="text"], input[type="email"], input[type="tel"],
        input[type="date"], input[type="number"], select, textarea {
            width: 100%; padding: 10px 12px;
            border: 1px solid var(--form-border-color); border-radius: 5px;
            font-size: 0.95rem; color: var(--form-text-color);
            background-color: #fff;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        input:focus, select:focus, textarea:focus {
            outline: none; border-color: var(--form-focus-border-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
        }
        textarea { min-height: 75px; resize: vertical; }
        .radio-group, .checkbox-group { display: flex; flex-wrap: wrap; gap: 8px 18px; }
        .radio-group div, .checkbox-group div { display: flex; align-items: center; }
        input[type="radio"], input[type="checkbox"] {
            margin-right: 6px; accent-color: var(--form-focus-border-color);
            width: 16px; height: 16px;
        }
        .conditional-section {
            display: none; padding: 15px; margin-top: 15px; margin-bottom:15px;
            border-left: 4px solid var(--conditional-border-color);
            background-color: var(--conditional-bg-color);
            border-radius: 0 6px 6px 0;
        }
        .conditional-section .form-group:last-child { margin-bottom: 0; }

        .form-navigation-buttons {
            display: flex; justify-content: space-between; margin-top: 30px;
            padding-top:20px; border-top: 1px solid #eee;
        }
        .nav-button {
            padding: 11px 22px; border: none; border-radius: 6px; font-size: 1rem;
            font-weight: 600; cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            color: var(--form-button-text-color);
        }
        .nav-button:active { transform: scale(0.98); }
        .next-button { background-color: var(--form-button-bg-color); }
        .next-button:hover { background-color: var(--form-button-hover-bg-color); }
        .prev-button { background-color: var(--form-button-secondary-bg-color); }
        .prev-button:hover { background-color: var(--form-button-secondary-hover-bg-color); }
        .submit-button { background-color: var(--form-button-bg-color); width: 100%; }
        .submit-button:hover { background-color: var(--form-button-hover-bg-color); }

        .ubo-section {
            padding-bottom: 10px; /* Space before buttons or hr */
        }
        .ubo-section h4 {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--form-text-color);
            margin-bottom: 20px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--form-border-color);
        }
        .remove-ubo-button {
            background-color: #db1919;
            color: whitesmoke; padding: 8px 16px; border-radius: 5px;
            font-size: 0.9rem; font-weight: 600; cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            border: none; /* Ensure no default border */
            margin-top: 10px; /* Add some space if multiple buttons appear */
        }

        .remove-ubo-button:active { transform: scale(0.98); }
        .remove-ubo-button:hover { background-color: #b01010; } /* Darker red on hover */

        /* Aannemer Section Styles (nieuw) */
        .aannemer-section {
            padding: 20px;
            margin-bottom: 20px; /* Ruimte tussen aannemer blokken */
            border: 1px solid var(--form-border-color);
            border-radius: var(--border-radius);
            background-color: var(--form-section-bg-color); /* Lichtgrijze achtergrond voor het blok */
        }
        .aannemer-section h4 {
            font-size: 1.15rem; /* Iets kleiner dan UBO h4 voor hiërarchie */
            font-weight: 700;
            color: var(--form-text-color);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--form-border-color);
        }
        .remove-aannemer-button { /* Hergebruik stijl van UBO verwijder knop of definieer apart */
            background-color: #db1919; /* Rode kleur */
            color: white; padding: 8px 16px; border-radius: 5px;
            font-size: 0.9rem; font-weight: 600; cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease;
            border: none;
            margin-top: 10px;
        }
        .remove-aannemer-button:hover { background-color: #b01010; } /* Donkerder rood */
        /* Optioneel: styling voor de container van alle aannemer formulieren */
        #aannemer-forms-container {
            margin-bottom: 15px; /* Ruimte voor de "Aannemer toevoegen" knop */
        }



        .form-row { display: flex; gap: 20px; }
        .form-row .form-group { flex: 1; }
        .asterisk { color: var(--danger-color); font-weight: bold; margin-left: 2px;}
        small.help-text { display: block; font-size: 0.8rem; color: #6c757d; margin-top: 4px; }

        /* Styles for "Anders, namelijk" text input */
        .inline-text-input {
            display: none; /* Default hidden, JS will add 'visible' class */
            width: auto; /* Desktop: allow it to take space based on flex-grow */
            margin-left: 8px;
            flex-grow: 1;
        }
        .inline-text-input.visible { /* JS adds this class to show the input */
            display: inline-block; /* Desktop visible style */
        }

        .cta-button {
            display: inline-block;
            background-color: var(--accent-color);
            color: var(--primary-color);
            padding: 16px 38px; /* Iets groter */
            text-decoration: none;
            font-size: 1.15rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            transition: background-color var(--transition-speed) ease, transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease;
            box-shadow: var(--box-shadow);
            animation: fadeInUpCustom 1s ease-out 0.8s;
            animation-fill-mode: backwards;
            position: relative;
            overflow: hidden;
            border: none; /* Ensure no default border */
        }
        .cta-button::before { /* Shine effect */
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(120deg, transparent, rgba(255,255,255,0.4), transparent);
            transition: left 0.7s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .cta-button:hover {
            background-color: #e6b840;
            transform: translateY(-4px) scale(1.02); /* Meer beweging */
            box-shadow: var(--box-shadow-hover);
        }
        .cta-button:hover::before {
            left: 100%;
        }

        /* --- START AANGEPASTE CSS VOOR INLINE HELP TIP --- */
        .help-tip {
            /* Verwijder absolute positionering t.o.v. fieldset */
            /* position: absolute; */ /* UITGECOMMENTARIEERD */
            /* top: 18px; */        /* UITGECOMMENTARIEERD */
            /* right: 18px; */       /* UITGECOMMENTARIEERD */

            display: inline-block;  /* NIEUW: Maakt het mogelijk om naast tekst te staan */
            vertical-align: middle; /* NIEUW: Lijn het icoontje verticaal uit met de tekst.
                                       Kies een andere waarde als 'text-bottom', 'super', 'top' beter past. */
            margin-left: 5px;       /* NIEUW: Kleine ruimte tussen de labeltekst en het ?-icoon */

            position: relative;     /* BLIJFT: Essentieel voor de positionering van de tooltip-paragraaf 'p' */
            
            /* Optioneel: Iets kleinere afmetingen voor inline gebruik */
            width: 20px;
            height: 20px;
            line-height: 20px; /* Aanpassen aan nieuwe hoogte voor verticale centrering '?' */
            font-size: 12px;   /* Lettergrootte van het '?' */

            background-color: #BCDBEA; /* Uw bestaande kleur */
            border-radius: 50%;
            text-align: center;
            font-weight: bold;
            color: #fff;
            cursor: default;
            z-index: 90; /* Zorgt dat het icoon boven normale content staat, maar onder de tooltip-tekst */
        }

        .help-tip:before { /* Het vraagteken zelf */
            content: '?';
        }

        .help-tip p { /* De tooltip paragraaf (tekstbox) */
            display: none; 
            position: absolute; 
            width: 280px; /* Breedte van de tooltip-tekstbox, pas aan indien nodig */
            padding: 15px;
            background-color: #1E2021;
            color: #FFF;
            text-align: left;
            font-size: 12px; /* Lettergrootte van de tooltip-tekst */
            line-height: 1.4;
            border-radius: 3px;
            box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);
            z-index: 100; /* Zorgt dat de tooltip-tekst boven alles (incl. ?-icoon) komt */

            /* Positionering ONDER het .help-tip icoon, horizontaal gecentreerd */
            top: calc(100% + 8px); /* 100% (hoogte van .help-tip icoon) + 8px ruimte (incl. pijl) */
            left: 50%;
            transform: translateX(-50%); /* Centreert de tooltip horizontaal */
        }

        .help-tip p:before { /* De pijl van de tooltip */
            content: '';
            position: absolute;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 6px 6px 6px; /* Creëert een driehoek die naar boven wijst */
            border-color: transparent transparent #1E2021 transparent; /* Alleen de onderste border is gekleurd */
            top: -6px; /* Plaatst de basis van de pijl (6px hoog) precies boven de tooltip-tekstbox */
            left: 50%;
            transform: translateX(-50%); /* Centreert de pijl horizontaal */
        }

        .help-tip:hover p {
            display: block;
            transform-origin: 50% 0; /* Animatie vanuit midden-boven */
            animation: fadeInTooltipAnimation 0.3s ease-in-out;
            -webkit-animation: fadeInTooltipAnimation 0.3s ease-in-out;
        }

        .help-tip p:after { /* Hover extender */
            content: '';
            position: absolute;
            width: 100%;
            /* Hoogte = hoogte .help-tip icoon (nu 20px) + marge tot tooltip (8px) = 28px */
            height: 28px; 
            top: -28px; /* Plaats boven de tooltip-tekstbox om het gat te overbruggen */
            left: 0;
            /* background-color: rgba(0,255,0,0.1); */ /* Voor debuggen */
        }

        /* CSS animatie voor de tooltip (naam is al uniek) */
        @keyframes fadeInTooltipAnimation {
            0% {
                opacity: 0;
                transform: scale(0.8) translateX(-50%); 
            }
            100% {
                opacity: 1;
                transform: scale(1) translateX(-50%); 
            }
        }
        @-webkit-keyframes fadeInTooltipAnimation { /* Voor oudere Safari */
            0% {
                opacity: 0;
                transform: scale(0.8) translateX(-50%);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateX(-50%);
            }
        }
        /* --- EINDE AANGEPASTE CSS VOOR INLINE HELP TIP --- */


        @keyframes fadeInDownCustom {
            from { opacity: 0; transform: translateY(-40px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInUpCustom {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }


        @media (max-width: 768px) {
            /* Responsive Header Styles */
            header#mainHeader .container { flex-direction: column; text-align: center; }
            .logo {
                font-size: 1.6rem; /* Adjusted from 1.9rem */
                margin-bottom: 15px;
            }
            header#mainHeader nav ul { flex-direction: column; margin-top: 10px; width: 100%; }
            header#mainHeader nav ul li { margin: 10px 0; margin-left: 0; } /* Aangepast: margin-left verwijderd voor verticale lijst */
            header#mainHeader nav ul li a { display: block; padding: 10px; }
            header#mainHeader nav ul li a::after { left: 50%; transform: translateX(-50%); }

            /* Responsive Form Styles */
            .form-container, .progress-bar-container { padding: 20px 15px; }

            .form-container h1 {
                font-size: 1.5rem; /* Adjusted from 1.7rem */
                margin-bottom: 8px;
            }
            .form-container .form-intro {
                font-size: 0.85rem; /* Adjusted from 0.9rem */
                margin-bottom: 20px;
            }

            .form-row { flex-direction: column; gap: 0; }
            /* .form-row .form-group { margin-bottom: 15px; } /* Optional: reduce bottom margin if 20px is too much */

            legend { font-size: 1.25rem; }
            .form-group label.radio-label, .form-group label.checkbox-label {
                font-size: 0.9rem; /* Adjusted from 0.95rem */
            }

            .progress-step span.tooltip-text { display: none; } /* Tooltips op progress bar verbergen op mobiel */
            
            /* Help-tip op mobiel, de tooltip kan nu ook breder zijn */
            .help-tip p {
                width: calc(100vw - 60px); /* Maak het bijna schermbreed, met wat marge */
                max-width: 280px; /* Maar niet breder dan de desktopversie */
                left: 50%;
                transform: translateX(-50%);
                /* Als de help-tip zelf heel dicht bij de rand van het scherm komt,
                   kan de tooltip naar links of rechts verschuiven. Dit is complexer
                   en vereist JS of meer geavanceerde CSS. Voor nu, de bovenstaande
                   zal in de meeste gevallen werken. */
            }


            .nav-button { padding: 12px 20px; font-size: 0.95rem; } /* Standardized padding */

            /* "Anders, namelijk" text input on mobile */
            .inline-text-input.visible {
                display: block; /* Mobile visible style: full width below label */
                width: 100% !important; /* Override JS style for width */
                margin-left: 0;
                margin-top: 8px; /* Space from radio/label */
            }
             .radio-group div, .checkbox-group div { /* Ensure items in radio/checkbox groups can wrap if text is long */
                flex-basis: 100%; /* Makes each item take full width if needed, helps with stacking if label + inline-input */
            }
            .radio-group div > input[type="radio"] + label + .inline-text-input.visible,
            .checkbox-group div > input[type="checkbox"] + label + .inline-text-input.visible {
                margin-top: 8px; /* Space between label and block input */
            }


            /* UBO section responsive styles */
            .ubo-section h4 {
                font-size: 1.1rem; /* Reduced for mobile */
            }
            .ubo-section .cta-button, /* UBO toevoegen button */
            .remove-ubo-button {
                display: block;
                width: 100%;
                text-align: center;
                padding: 12px 20px; /* Standardized padding */
                font-size: 1rem;
                margin-top: 15px;
            }
            /* Maintain specific UBO button colors if .cta-button styles are too generic */
            .ubo-section .cta-button {
                 background-color: var(--accent-color);
                 color: var(--primary-color);
            }
             .remove-ubo-button {
                background-color: #db1919; /* var(--danger-color) might be better if defined universally */
                color: var(--form-button-text-color);
            }
        }
    </style>
</head>
<body>
    <header id="mainHeader">
        <div class="container">
            <a href="car_site.html#hero" class="logo">[Uw Bedrijfsnaam]</a>
            <nav>
                <ul>
                    <li><a href="car_site.html#hero">Home</a></li>
                    <li><a href="car_site.html#informatie">Informatie</a></li>
                    <li><a href="car_site.html#diensten">Diensten</a></li>
                    <li><a href="car_site.html#offerte-cta" class="active">Offerte</a></li> <!-- Actief gezet -->
                    <li><a href="car_site.html#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="progress-bar-container">
        <div class="progress-bar" id="progressBar">
            <div class="progress-line" id="progressLine"></div>
            <!-- Steps dynamically inserted here -->
        </div>
    </div>

    <div class="form-container">
        <h1>Offerte Tijdelijke CAR-Verzekering</h1>
        <p class="form-intro">Volg de stappen om uw offerte aan te vragen. Velden met een <span class="asterisk">*</span> zijn verplicht.</p>

        <form id="carOfferteForm" action="#" method="POST">

            <!-- Stap 1: Bedrijfsgegevens -->
            <fieldset class="form-step active" data-step-name="Bedrijf">
                <legend>1. Bedrijfsgegevens</legend>
                <!-- ... (inhoud van stap 1 blijft hetzelfde) ... -->

                <div class="form-group">
                    <div class="form-row">
                        <label for="kvkNummer">KVK-nummer<span class="asterisk">*</span></label>
                        <div class="help-tip">
                            <p>This is the inline help tip! It can contain all kinds of HTML. Style it as you please.</p>
                        </div>
                    </div>
                    <input type="text" id="kvkNummer" name="kvkNummer" required>
                </div>


                <div class="form-group">
                    <label for="rechtsvorm">Rechtsvorm<span class="asterisk">*</span></label>
                    <input type="text" id="rechtsvorm" name="rechtsvorm" required>
                </div>
                <div class="form-group">
                    <label for="naamVoorletters">Naam en voorletter(s)<span class="asterisk">*</span></label>
                    <input type="text" id="naamVoorletters" name="naamVoorletters" required>
                </div>
                <div class="form-group">
                    <label>Geslacht<span class="asterisk">*</span></label>
                    <div class="radio-group">
                        <div><input type="radio" id="geslachtMan" name="geslacht" value="man" required><label for="geslachtMan" class="radio-label">Man</label></div>
                        <div><input type="radio" id="geslachtVrouw" name="geslacht" value="vrouw"><label for="geslachtVrouw" class="radio-label">Vrouw</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label for="geboortedatum">Geboortedatum<span class="asterisk">*</span></label>
                    <input type="date" id="geboortedatum" name="geboortedatum" required>
                </div>
                <div class="form-group">
                    <label for="bedrijfsnaam">Bedrijfsnaam<span class="asterisk">*</span></label>
                    <input type="text" id="bedrijfsnaam" name="bedrijfsnaam" required>
                </div>
                <div class="form-group">
                    <label for="handelsnaam">Handelsnaam</label>
                    <input type="text" id="handelsnaam" name="handelsnaam">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="telefoonnummer">Telefoonnummer<span class="asterisk">*</span></label>
                        <input type="tel" id="telefoonnummer" name="telefoonnummer" required>
                    </div>
                    <div class="form-group">
                        <label for="emailadres">E-mailadres<span class="asterisk">*</span></label>
                        <input type="email" id="emailadres" name="emailadres" required>
                    </div>
                </div>
                <div class="form-group">
                    <label for="postadres">Postadres<span class="asterisk">*</span></label>
                    <input type="text" id="postadres" name="postadres" placeholder="Straatnaam Huisnr, Postcode Plaats" required>
                </div>
                <div class="form-navigation-buttons">
                    <span></span>
                    <button type="button" class="nav-button next-button" onclick="nextStep()">Volgende</button>
                </div>
            </fieldset>

            <!-- Stap 2: Werkdetails -->
            <fieldset class="form-step" data-step-name="Werk">
                <legend>2. Werkdetails</legend>
                <!-- ... (inhoud van stap 2 blijft hetzelfde) ... -->
                 <div class="form-group">
                    <label for="startWerkzaamheden">Wanneer beginnen de werkzaamheden of per welke datum zijn de werkzaamheden begonnen?<span class="asterisk">*</span></label>
                    <input type="date" id="startWerkzaamheden" name="startWerkzaamheden" required>
                </div>
                 <div class="form-group">
                    <label for="ingangsdatumVerzekering">Ingangsdatum verzekering<span class="asterisk">*</span></label>
                    <input type="date" id="ingangsdatumVerzekering" name="ingangsdatumVerzekering" required>
                </div>
                <div class="form-group" id="redenLateStartContainer" style="display: none;">
                    <label for="redenLateStart">Als de werkzaamheden al zijn begonnen voor de ingangsdatum, wat is de reden?</label>
                    <textarea id="redenLateStart" name="redenLateStart"></textarea>
                </div>
                <div class="form-group">
                    <label for="duurBouwMaanden">Geschatte duur bouw (maanden)?<span class="asterisk">*</span></label>
                    <input type="number" id="duurBouwMaanden" name="duurBouwMaanden" min="1" required>
                </div>

                <div class="form-group">
                    <label>Onderhoudstermijn overeengekomen?<span class="asterisk">*</span></label>
                    <div class="radio-group">
                        <div><input type="radio" id="onderhoudstermijnOvereen_ja" name="onderhoudstermijnOvereen" value="ja" required onclick="toggleConditional('onderhoudstermijnOvereenDetails', true)"><label for="onderhoudstermijnOvereen_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="onderhoudstermijnOvereen_nee" name="onderhoudstermijnOvereen" value="nee" onclick="toggleConditional('onderhoudstermijnOvereenDetails', false)"><label for="onderhoudstermijnOvereen_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="onderhoudstermijnOvereenDetails" class="conditional-section">
                    <div class="form-group">
                        <label>Onderhoudstermijn meeverzekeren?<span class="asterisk">*</span></label>
                         <div class="radio-group">
                            <div><input type="radio" id="onderhoudstermijnMeeVerzekeren_ja" name="onderhoudstermijnMeeVerzekeren" value="ja" onclick="toggleConditional('onderhoudstermijnDuurDetails', true)"><label for="onderhoudstermijnMeeVerzekeren_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="onderhoudstermijnMeeVerzekeren_nee" name="onderhoudstermijnMeeVerzekeren" value="nee" onclick="toggleConditional('onderhoudstermijnDuurDetails', false)"><label for="onderhoudstermijnMeeVerzekeren_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                    <div id="onderhoudstermijnDuurDetails" class="conditional-section">
                         <div class="form-group">
                            <label>Duur onderhoudstermijn?<span class="asterisk">*</span></label>
                            <div class="radio-group">
                                <div><input type="radio" id="duurOnderhoud_3" name="duurOnderhoud" value="3"><label for="duurOnderhoud_3" class="radio-label">3 maanden</label></div>
                                <div><input type="radio" id="duurOnderhoud_6" name="duurOnderhoud" value="6"><label for="duurOnderhoud_6" class="radio-label">6 maanden</label></div>
                                <div><input type="radio" id="duurOnderhoud_12" name="duurOnderhoud" value="12"><label for="duurOnderhoud_12" class="radio-label">12 maanden</label></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="aanneemsom">Aanneemsom van het werk?<span class="asterisk">*</span></label>
                    <div class="input-group">
                        <span class="currency-symbol">€</span>
                        <input type="number" id="aanneemsom" name="aanneemsom" step="0.01" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>BTW<span class="asterisk">*</span></label>
                    <div class="radio-group">
                        <div><input type="radio" id="btw_inclusief" name="btw" value="inclusief" required><label for="btw_inclusief" class="radio-label">Inclusief btw</label></div>
                        <div><input type="radio" id="btw_exclusief" name="btw" value="exclusief"><label for="btw_exclusief" class="radio-label">Exclusief btw</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Aanneemsom inclusief:</label>
                    <div class="checkbox-group">
                        <div><input type="checkbox" id="inc_honoraria" name="aanneemsomInclusief[]" value="honoraria"><label for="inc_honoraria" class="checkbox-label">Honoraria</label></div>
                        <div><input type="checkbox" id="inc_toezicht" name="aanneemsomInclusief[]" value="toezicht"><label for="inc_toezicht" class="checkbox-label">Toezicht/controle</label></div>
                        <div><input type="checkbox" id="inc_buitenbestek" name="aanneemsomInclusief[]" value="buitenbestek"><label for="inc_buitenbestek" class="checkbox-label">Buiten bestek</label></div>
                        <div><input type="checkbox" id="inc_opdrachtgeverWerk" name="aanneemsomInclusief[]" value="opdrachtgeverWerk"><label for="inc_opdrachtgeverWerk" class="checkbox-label">Werk opdrachtgever</label></div>
                        <div><input type="checkbox" id="inc_opdrachtgeverBouwcomp" name="aanneemsomInclusief[]" value="opdrachtgeverBouwcomp"><label for="inc_opdrachtgeverBouwcomp" class="checkbox-label">Componenten opdrachtgever</label></div>
                        <div><input type="checkbox" id="inc_geen" name="aanneemsomInclusief[]" value="geen"><label for="inc_geen" class="checkbox-label">Geen van deze</label></div>
                    </div>
                </div>
                <div class="form-navigation-buttons">
                    <button type="button" class="nav-button prev-button" onclick="prevStep()">Vorige</button>
                    <button type="button" class="nav-button next-button" onclick="nextStep()">Volgende</button>
                </div>
            </fieldset>

            <!-- Stap 3: Verzekerde Sommen & Risico's -->
            <fieldset class="form-step" data-step-name="Sommen">
                <legend>3. Verzekerde Sommen & Risico's</legend>
                <!-- ... (inhoud van stap 3 blijft hetzelfde) ... -->
                 <div class="form-group">
                    <label>Aansprakelijkheid (secundaire dekking)<span class="asterisk">*</span></label>
                    <select name="aansprakelijkheid_som" required>
                        <option value="" disabled selected>Kies een bedrag</option>
                        <option value="500000">tot € 500.000,-</option>
                        <option value="1250000">tot € 1.250.000,-</option>
                        <option value="2500000">tot € 2.500.000,-</option>
                        <option value="niet_meeverzekeren">Niet meeverzekeren</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Bestaande eigendommen opdrachtgever<span class="asterisk">*</span></label>
                    <select name="bestaande_eigendommen_som" id="bestaande_eigendommen_som" onchange="toonAndersVeld(this, 'anders_bestaand_eigendommen_input')" required>
                        <option value="" disabled selected>Kies een bedrag</option>
                        <option value="50000">tot € 50.000,-</option>
                        <option value="125000">tot € 125.000,-</option>
                        <option value="250000">tot € 250.000,-</option>
                        <option value="niet_meeverzekeren">Niet meeverzekeren</option>
                        <option value="Anders">Anders</option>
                    </select>
                    <div class="input-group" id="anders_bestaand_eigendommen_input" style="display: none; margin-top: 8px;">
                        <span class="currency-symbol">€</span>
                        <input type="number" name="bestaande_eigendommen_som_anders_val" placeholder="Anders, namelijk...">
                    </div>
                </div>
                <div class="form-group">
                    <label>Hulpmateriaal<span class="asterisk">*</span></label>
                    <select name="Hulpmateriaal" id="Hulpmateriaal" onchange="toonAndersVeld(this, 'anders_Hulpmateriaal_input')" required>
                        <option value="" disabled selected>Kies een bedrag</option>
                        <option value="50000">tot € 50.000,-</option>
                        <option value="125000">tot € 125.000,-</option>
                        <option value="250000">tot € 250.000,-</option>
                        <option value="niet_meeverzekeren">Niet meeverzekeren</option>
                        <option value="Anders">Anders</option>
                    </select>
                    <div class="input-group" id="anders_Hulpmateriaal_input" style="display: none; margin-top: 8px;">
                        <span class="currency-symbol">€</span>
                        <input type="number" name="anders_Hulpmateriaal_val" placeholder="Anders, namelijk...">
                    </div>
                </div>
                <div class="form-group">
                    <label>Eigen risico<span class="asterisk">*</span></label>
                    <select name="Eigen_risico_select" id="Eigen_risico" onchange="toonAndersVeld(this, 'anders_Eigen_risico_input')" required> <!-- Changed name to avoid conflict -->
                        <option value="" disabled selected>Kies een bedrag</option>
                        <option value="500">tot € 500,-</option>
                        <option value="1000">tot € 1.000,-</option>
                        <option value="2500">tot € 2.500,-</option>
                        <option value="5000">tot € 5.000,-</option>
                        <option value="niet_meeverzekeren">Niet meeverzekeren</option>
                        <option value="Anders">Anders</option>
                    </select>
                    <div class="input-group" id="anders_Eigen_risico_input" style="display: none; margin-top: 8px;">
                        <span class="currency-symbol">€</span>
                        <input type="number" name="anders_Eigen_risico_val" placeholder="Anders, namelijk...">
                    </div>
                </div>
                <div class="form-group">
                    <label>Wil je bedrijfsschade meeverzekeren?<span class="asterisk">*</span></label>
                     <div class="radio-group">
                        <div><input type="radio" id="bedrijfsschade_ja" name="bedrijfsschade_meeverzekeren" value="ja" onclick="toggleConditional('bedrijfsschadeDetails', true)"><label for="bedrijfsschade_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="bedrijfsschade_nee" name="bedrijfsschade_meeverzekeren" value="nee" checked onclick="toggleConditional('bedrijfsschadeDetails', false)"><label for="bedrijfsschade_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="bedrijfsschadeDetails" class="conditional-section">
                    <div class="form-group">
                        <label for="bedrijfsschade_belang">Verzekerd belang bedrijfsschade<span class="asterisk">*</span></label>
                        <div class="input-group">
                            <span class="currency-symbol">€</span>
                            <input type="number" id="bedrijfsschade_belang" name="bedrijfsschade_belang">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="bedrijfsschade_uitkeringstermijn">Uitkeringstermijn (weken)<span class="asterisk">*</span></label>
                        <input type="number" id="bedrijfsschade_uitkeringstermijn" name="bedrijfsschade_uitkeringstermijn">
                    </div>
                </div>
                <div class="form-navigation-buttons">
                    <button type="button" class="nav-button prev-button" onclick="prevStep()">Vorige</button>
                    <button type="button" class="nav-button next-button" onclick="nextStep()">Volgende</button>
                </div>
            </fieldset>

            <!-- Stap 4: Constructiedetails -->
            <fieldset class="form-step" data-step-name="Constructie">
                <legend>4. Constructiedetails & Specifieke Risico's</legend>
                <div class="form-group">
                    <label for="locatieWerk">Waar wordt het werk gerealiseerd?<span class="asterisk">*</span></label>
                    <input type="text" id="locatieWerk" name="locatieWerk" required>
                </div>
                <div class="form-group">
                    <label>Aard van gebouw/bouwwerk<span class="asterisk">*</span></label>
                    <div class="radio-group">
                        <div><input type="radio" id="aardGebouw_steen" name="aardGebouw" value="steenhard" required onclick="hideLinkedText('aardGebouwAndersText')"><label for="aardGebouw_steen" class="radio-label">Steen/hard</label></div>
                        <div><input type="radio" id="aardGebouw_metaal" name="aardGebouw" value="metaalhard" onclick="hideLinkedText('aardGebouwAndersText')"><label for="aardGebouw_metaal" class="radio-label">Metaal/hard</label></div>
                        <div> <!-- Container for radio, label, and inline text -->
                            <input type="radio" id="aardGebouw_andersRadio" name="aardGebouw" value="anders" onclick="showLinkedText('aardGebouwAndersText')">
                            <label for="aardGebouw_andersRadio" class="radio-label">Anders, namelijk:</label>
                            <input type="text" id="aardGebouwAndersText" name="aardGebouwAndersText" class="inline-text-input">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Worden er sloopwerkzaamheden verricht aan dragende constructies?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="sloopwerk_ja" name="sloopwerk" value="ja" onclick="toggleConditional('sloopwerkDetails', true)"><label for="sloopwerk_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="sloopwerk_nee" name="sloopwerk" value="nee" checked onclick="toggleConditional('sloopwerkDetails', false)"><label for="sloopwerk_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="sloopwerkDetails" class="conditional-section">
                    <div class="form-group">
                        <label for="sloopwerk_constructies">Welke dragende constructies worden gesloopt?</label>
                        <textarea id="sloopwerk_constructies" name="sloopwerk_constructies" placeholder="Bijv. muren, kolommen, vloeren..."></textarea>
                    </div>
                    <div class="form-group">
                        <label>Is hiervoor door een gekwalificeerd constructeur een schriftelijk sloopadvies opgesteld dat gericht is op het voorkomen van schade aan te behouden zaken?</label>
                         <div class="radio-group">
                            <div><input type="radio" id="sloopadvies_ja" name="sloopadvies" value="ja"><label for="sloopadvies_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="sloopadvies_nee" name="sloopadvies" value="nee"><label for="sloopadvies_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Vindt er bemaling plaats?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="bemaling_ja" name="bemaling" value="ja" onclick="toggleConditional('bemalingDetails', true)"><label for="bemaling_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="bemaling_nee" name="bemaling" value="nee" checked onclick="toggleConditional('bemalingDetails', false)"><label for="bemaling_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="bemalingDetails" class="conditional-section">
                    <div class="form-group">
                        <label>Is hiervoor door een geotechnisch adviseur een schriftelijk bemalingsadvies opgesteld waaruit blijkt dat de omgeving de benodigde grondwaterstandverlaging kan doorstaan met een verwaarloosbare kans op schade?</label>
                         <div class="radio-group">
                            <div><input type="radio" id="bemalingsadvies_ja" name="bemalingsadvies" value="ja"><label for="bemalingsadvies_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="bemalingsadvies_nee" name="bemalingsadvies" value="nee"><label for="bemalingsadvies_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Wordt er binnen vijf meter langs een bestaande fundering gegraven tot dieper dan die bestaande fundering?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="gravenNabijFundering_ja" name="gravenNabijFundering" value="ja" onclick="toggleConditional('gravenNabijFunderingDetails', true)"><label for="gravenNabijFundering_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="gravenNabijFundering_nee" name="gravenNabijFundering" value="nee" checked onclick="toggleConditional('gravenNabijFunderingDetails', false)"><label for="gravenNabijFundering_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="gravenNabijFunderingDetails" class="conditional-section">
                    <div class="form-group">
                        <label>Is hiervoor door een geotechnisch adviseur een schriftelijk uitvoeringsplan opgesteld waaruit blijkt dat deze fundering de ontgraving kan verdragen met een verwaarloosbare kans op schade?</label>
                         <div class="radio-group">
                            <div><input type="radio" id="uitvoeringsplanGraven_ja" name="uitvoeringsplanGraven" value="ja"><label for="uitvoeringsplanGraven_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="uitvoeringsplanGraven_nee" name="uitvoeringsplanGraven" value="nee"><label for="uitvoeringsplanGraven_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                </div>
                 <div class="form-group">
                    <label>Is er sprake van de bouw van een kelder of zwembad?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="kelderZwembad_ja" name="kelderZwembad" value="ja"><label for="kelderZwembad_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="kelderZwembad_nee" name="kelderZwembad" value="nee" checked><label for="kelderZwembad_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Wordt er een paalfundering aangebracht?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="paalfundering_ja" name="paalfundering" value="ja" onclick="toggleConditional('paalfunderingDetails', true)"><label for="paalfundering_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="paalfundering_nee" name="paalfundering" value="nee" checked onclick="toggleConditional('paalfunderingDetails', false)"><label for="paalfundering_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="paalfunderingDetails" class="conditional-section">
                    <div class="form-group">
                        <label>Is hiervoor door een geotechnisch adviseur een schriftelijk funderingsadvies opgesteld waaruit blijkt dat de omgeving deze werkzaamheden kan doorstaan met een verwaarloosbare kans op schade?</label>
                        <div class="radio-group">
                            <div><input type="radio" id="funderingsadviesPaal_ja" name="funderingsadviesPaal" value="ja"><label for="funderingsadviesPaal_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="funderingsadviesPaal_nee" name="funderingsadviesPaal" value="nee"><label for="funderingsadviesPaal_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Welk paalsysteem wordt er toegepast?</label>
                        <div class="radio-group">
                            <div><input type="radio" id="paalsysteem_geslagen" name="paalsysteem" value="geslagen_getrild"><label for="paalsysteem_geslagen" class="radio-label">Geslagen/getrild</label></div>
                            <div><input type="radio" id="paalsysteem_gedrukt" name="paalsysteem" value="gedrukt"><label for="paalsysteem_gedrukt" class="radio-label">Gedrukt</label></div>
                            <div><input type="radio" id="paalsysteem_geboord" name="paalsysteem" value="geboord"><label for="paalsysteem_geboord" class="radio-label">Geboord</label></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Staan er bouwwerken binnen een afstand van 15 meter van de aan te brengen paalfundering?</label>
                        <div class="radio-group">
                            <div><input type="radio" id="bouwwerkenBinnen15m_ja" name="bouwwerkenBinnen15m" value="ja" onclick="toggleConditional('bouwwerkenBinnen15mDetails', true)"><label for="bouwwerkenBinnen15m_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="bouwwerkenBinnen15m_nee" name="bouwwerkenBinnen15m" value="nee" onclick="toggleConditional('bouwwerkenBinnen15mDetails', false)"><label for="bouwwerkenBinnen15m_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                    <div id="bouwwerkenBinnen15mDetails" class="conditional-section">
                        <div class="form-group">
                            <label>Van wie zijn de bouwwerken?</label>
                            <div class="radio-group">
                                <div><input type="radio" id="eigenaarBouwwerk_opdrachtgever" name="eigenaarBouwwerk" value="opdrachtgever"><label for="eigenaarBouwwerk_opdrachtgever" class="radio-label">Van opdrachtgever</label></div>
                                <div><input type="radio" id="eigenaarBouwwerk_anderen" name="eigenaarBouwwerk" value="anderen"><label for="eigenaarBouwwerk_anderen" class="radio-label">Van anderen</label></div>
                                <div><input type="radio" id="eigenaarBouwwerk_beide" name="eigenaarBouwwerk" value="beide"><label for="eigenaarBouwwerk_beide" class="radio-label">Beide</label></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="afstandDichtstbijzijndeBouwwerk">Op hoeveel meter afstand staat het dichtstbijzijnde bouwwerk?</label>
                            <div class="input-group">
                                <input type="number" id="afstandDichtstbijzijndeBouwwerk" name="afstandDichtstbijzijndeBouwwerk" min="0" step="0.1">
                                <span class="unit-symbol">meter</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Zijn de bouwwerken binnen een afstand van 15 meter ook op palen gefundeerd?</label>
                            <div class="radio-group">
                                <div><input type="radio" id="ookOpPalen_ja" name="ookOpPalen" value="ja" onclick="toggleConditional('andereFunderingswijzeDetails', false); hideLinkedText('andereFunderingswijze');"><label for="ookOpPalen_ja" class="radio-label">Ja</label></div>
                                <div> <!-- Modified this radio's onclick to also control the text field directly -->
                                    <input type="radio" id="ookOpPalen_nee" name="ookOpPalen" value="nee" onclick="toggleConditional('andereFunderingswijzeDetails', true); showLinkedText('andereFunderingswijze');">
                                    <label for="ookOpPalen_nee" class="radio-label">Nee</label>
                                </div>
                            </div>
                        </div>
                        <div id="andereFunderingswijzeDetails" class="conditional-section">
                             <div class="form-group"> <!-- This form-group wraps the text input for "andere funderingswijze" -->
                                <label for="andereFunderingswijze">Zo nee, welke funderingswijze is er dan toegepast?</label>
                                <input type="text" id="andereFunderingswijze" name="andereFunderingswijze" placeholder="Bijv. op staal, strokenfundering..." class="inline-text-input"> <!-- Applied class here too -->
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Worden er grondkerende constructies (zoals een damwand of berlinerwand) aangebracht?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="grondkering_ja" name="grondkering" value="ja" onclick="toggleConditional('grondkeringDetails', true)"><label for="grondkering_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="grondkering_nee" name="grondkering" value="nee" checked onclick="toggleConditional('grondkeringDetails', false)"><label for="grondkering_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="grondkeringDetails" class="conditional-section">
                     <div class="form-group">
                        <label>Is hiervoor door een geotechnisch adviseur een schriftelijk advies opgesteld waaruit blijkt dat de omgeving deze werkzaamheden kan doorstaan met een verwaarloosbare kans op schade?</label>
                         <div class="radio-group">
                            <div><input type="radio" id="adviesGrondkering_ja" name="adviesGrondkering" value="ja"><label for="adviesGrondkering_ja" class="radio-label">Ja</label></div>
                            <div><input type="radio" id="adviesGrondkering_nee" name="adviesGrondkering" value="nee"><label for="adviesGrondkering_nee" class="radio-label">Nee</label></div>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Is er sprake van funderingsherstel of verbetering van de fundering?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="funderingsherstel_ja" name="funderingsherstel" value="ja"><label for="funderingsherstel_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="funderingsherstel_nee" name="funderingsherstel" value="nee" checked><label for="funderingsherstel_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>

                <div class="form-navigation-buttons">
                    <button type="button" class="nav-button prev-button" onclick="prevStep()">Vorige</button>
                    <button type="button" class="nav-button next-button" onclick="nextStep()">Volgende</button>
                </div>
            </fieldset>

            <!-- Stap 5: Uitvoering & Aannemer -->
             <fieldset class="form-step" data-step-name="Uitvoering">
                <legend>5. Uitvoering & Aannemer</legend>
                <!-- ... (inhoud van stap 5 blijft hetzelfde) ... -->
                 <div class="form-group">
                    <label>Dient er een bedrag voor arbeidsloon meeverzekerd te worden?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="arbeidsloon_ja" name="arbeidsloon_meeverzekeren" value="ja" onclick="toggleConditional('arbeidsloonDetails', true)"><label for="arbeidsloon_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="arbeidsloon_nee" name="arbeidsloon_meeverzekeren" value="nee" checked onclick="toggleConditional('arbeidsloonDetails', false)"><label for="arbeidsloon_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="arbeidsloonDetails" class="conditional-section">
                    <div class="form-group">
                        <label for="arbeidsloon_som">Verzekerde som arbeidsloon</label>
                        <div class="input-group">
                            <span class="currency-symbol">€</span>
                            <input type="number" id="arbeidsloon_som" name="arbeidsloon_som">
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <label>Wordt het werk door een aannemer uitgevoerd?</label>
                    <div class="radio-group">
                        <div><input type="radio" id="werkDoorAannemer_nee" name="werkDoorAannemer" value="nee" onclick="toggleConditional('aannemerDetailopmerking', true);toggleConditional('aannemerDetailsContainer', false)"><label for="werkDoorAannemer_nee" class="radio-label">Nee</label></div>
                        <div><input type="radio" id="werkDoorAannemer_geheel" name="werkDoorAannemer" value="geheel" checked onclick="toggleConditional('aannemerDetailsContainer', true);toggleConditional('aannemerDetailopmerking', false)"><label for="werkDoorAannemer_geheel" class="radio-label">Geheel</label></div>
                        <div><input type="radio" id="werkDoorAannemer_gedeeltelijk" name="werkDoorAannemer" value="gedeeltelijk" onclick="toggleConditional('aannemerDetailsContainer', true);toggleConditional('aannemerDetailopmerking', false)"><label for="werkDoorAannemer_gedeeltelijk" class="radio-label">Gedeeltelijk</label></div>
                    </div>
                </div>

                <div id="aannemerDetailopmerking" class="conditional-section">
                    <div class="form-group">
                        <label for="aannemer_opmerking">Opmerking</label>
                        <textarea id="aannemer_opmerking" name="aannemer_opmerking" placeholder="Bijv. Waarom wordt het werk door de aannemer niet uitgevoerd?"></textarea>
                    </div>
                </div>
                <div id="aannemerDetailsContainer" class="conditional-section">
                    <div id="aannemer-forms-container">
                        <!-- Eerste aannemer-sectie (initieel aanwezig) -->
                        <div class="aannemer-section" data-aannemer-index="1">
                            <h4>Aannemer 1</h4>
                            <div class="form-group">
                                <label for="aannemer1_naam">Naam van de aannemer<span class="asterisk">*</span></label>
                                <input type="text" id="aannemer1_naam" name="aannemer1_naam">
                            </div>
                            <div class="form-group">
                                <label for="aannemer1_adres">Adresgegevens aannemer<span class="asterisk">*</span></label>
                                <input type="text" id="aannemer1_adres" name="aannemer1_adres" placeholder="Straat Huisnr, Postcode Plaats">
                            </div>
                            <div class="form-group">
                                <label for="aannemer1_telefoon">Telefoonnummer aannemer</label>
                                <input type="tel" id="aannemer1_telefoon" name="aannemer1_telefoon">
                            </div>
                            <div class="form-group">
                                <label>Heeft deze aannemer een Bedrijfsaansprakelijkheidsverzekering (AVB)?<span class="asterisk">*</span></label>
                                <div class="radio-group">
                                    <div><input type="radio" id="aannemer1_avb_ja" name="aannemer1_avb" value="ja" onclick="toggleConditional('aannemer1_avbDetails', true)"><label for="aannemer1_avb_ja" class="radio-label">Ja</label></div>
                                    <div><input type="radio" id="aannemer1_avb_nee" name="aannemer1_avb" value="nee" onclick="toggleConditional('aannemer1_avbDetails', false)"><label for="aannemer1_avb_nee" class="radio-label">Nee</label></div>
                                </div>
                            </div>
                            <div id="aannemer1_avbDetails" class="conditional-section">
                                <div class="form-group">
                                    <label for="aannemer1_avb_maatschappij">Bij welke maatschappij?</label>
                                    <input type="text" id="aannemer1_avb_maatschappij" name="aannemer1_avb_maatschappij">
                                </div>
                                <div class="form-group">
                                    <label for="aannemer1_avb_polisnr">Polisnummer</label>
                                    <input type="text" id="aannemer1_avb_polisnr" name="aannemer1_avb_polisnr">
                                </div>
                                 <div class="form-row">
                                    <div class="form-group">
                                        <label for="aannemer1_avb_bedrag">Verzekerd bedrag</label>
                                        <div class="input-group"><span class="currency-symbol">€</span><input type="number" id="aannemer1_avb_bedrag" name="aannemer1_avb_bedrag" step="any"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="aannemer1_avb_eigenrisico">Eigen risico p.g.</label>
                                        <div class="input-group"><span class="currency-symbol">€</span><input type="number" id="aannemer1_avb_eigenrisico" name="aannemer1_avb_eigenrisico" step="any"></div>
                                    </div>
                                </div>
                            </div>
                             <!-- Verwijderknop wordt hier niet standaard getoond, alleen voor extra aannemers -->
                        </div>
                        <!-- Dynamisch toegevoegde aannemers komen hier -->
                    </div>
                    <button type="button" onclick="AannemerToevoegen()" class="cta-button" style="margin-top: 5px;">Extra Aannemer Toevoegen</button>
                </div>
                 <div class="form-group">
                    <label for="overige_opmerkingen_beoordeling">Overige opmerkingen voor beoordeling</label>
                    <textarea id="overige_opmerkingen_beoordeling" name="overige_opmerkingen_beoordeling"></textarea>
                </div>
                <div class="form-navigation-buttons">
                    <button type="button" class="nav-button prev-button" onclick="prevStep()">Vorige</button>
                    <button type="button" class="nav-button next-button" onclick="nextStep()">Volgende</button>
                </div>
            </fieldset>

            <!-- Stap 6: UBO & Afronding -->
            <fieldset class="form-step" data-step-name="UBO & Slot">
                <legend>6. UBO Gegevens & Afronding</legend>
                <!-- ... (inhoud van stap 6 blijft hetzelfde) ... -->
                <div id="ubo-forms-container">
                    <!-- De eerste UBO-sectie staat hier al als de pagina laadt -->
                    <div class="ubo-section">
                        <h4>UBO 1 / Statutair Bestuurder 1</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ubo1_voornamen">Volledige voornamen<span class="asterisk"></span></label>
                                <input type="text" id="ubo1_voornamen" name="ubo1_voornamen" required>
                            </div>
                            <div class="form-group" style="flex: 0.5;">
                                <label for="ubo1_tussenvoegsel">Tussenvoegsel(s)</label>
                                <input type="text" id="ubo1_tussenvoegsel" name="ubo1_tussenvoegsel">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="ubo1_achternaam">Eigen achternaam<span class="asterisk"></span></label>
                            <input type="text" id="ubo1_achternaam" name="ubo1_achternaam" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="ubo1_geboortedatum">Geboortedatum<span class="asterisk"></span></label>
                                <input type="date" id="ubo1_geboortedatum" name="ubo1_geboortedatum" required>
                            </div>
                            <div class="form-group">
                                <label for="ubo1_woonland">Woonland<span class="asterisk"></span></label>
                                <input type="text" id="ubo1_woonland" name="ubo1_woonland" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Type UBO<span class="asterisk">*</span></label>
                            <div class="radio-group">
                                <div><input type="radio" id="ubo1_type_eigendom" name="ubo1_type" value="eigendom" required><label for="ubo1_type_eigendom" class="radio-label">Op basis van eigendom</label></div>
                                <div><input type="radio" id="ubo1_type_zeggenschap" name="ubo1_type" value="zeggenschap"><label for="ubo1_type_zeggenschap" class="radio-label">Op basis van zeggenschap</label></div>
                                <div><input type="radio" id="ubo1_type_statutair" name="ubo1_type" value="statutair"><label for="ubo1_type_statutair" class="radio-label">Op basis van (statutair) bestuur</label></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="ubo1_adres">Volledige adres<span class="asterisk">*</span></label>
                            <input type="text" id="ubo1_adres" name="ubo1_adres" placeholder="Straatnaam Huisnr, Postcode Plaats" required>
                        </div>

                        <!-- De knop om een NIEUWE UBO toe te voegen -->
                        <button type="button" onclick="UBOtoevoegen()" class="cta-button">UBO toevoegen</button>

                        <!-- De eerste UBO heeft geen "verwijder" knop direct hier, die wordt dynamisch toegevoegd -->
                        <hr style="margin: 25px 0; border-color: #eee;" class="ubo-separator"> <!-- Added class for consistency -->
                    </div>

                    <!-- Nieuwe UBO-secties worden hier dynamisch toegevoegd -->

                </div>

                 <div class="form-group">
                    <label>Is deze verzekering momenteel elders ondergebracht?</label>
                     <div class="radio-group">
                        <div><input type="radio" id="elders_ondergebracht_ja" name="elders_ondergebracht" value="ja" onclick="toggleConditional('eldersOndergebrachtDetails', true)"><label for="elders_ondergebracht_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="elders_ondergebracht_nee" name="elders_ondergebracht" value="nee" checked onclick="toggleConditional('eldersOndergebrachtDetails', false)"><label for="elders_ondergebracht_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="eldersOndergebrachtDetails" class="conditional-section">
                    <div class="form-group">
                        <label for="vorige_maatschappij">Maatschappij</label>
                        <input type="text" id="vorige_maatschappij" name="vorige_maatschappij">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vorige_polisnummer">Polisnummer</label>
                            <input type="text" id="vorige_polisnummer" name="vorige_polisnummer">
                        </div>
                        <div class="form-group">
                            <label for="vorige_afloopdatum">Afloopdatum</label>
                            <input type="date" id="vorige_afloopdatum" name="vorige_afloopdatum">
                        </div>
                    </div>
                </div>
                <div class="form-group" style="margin-top: 25px;">
                    <label class="checkbox-label">
                        <input type="checkbox" name="verklaring_waarheid" required>
                        Ik verklaar alle gegevens naar waarheid te hebben ingevuld.<span class="asterisk">*</span>
                    </label>
                </div>
                <div class="form-group">
                    <label class="checkbox-label">
                        <input type="checkbox" name="verklaring_wijziging_ubo" required>
                        Ik verklaar wijzigingen ten aanzien van de UBO's direct te melden.<span class="asterisk">*</span>
                    </label>
                </div>
                <div class="form-navigation-buttons">
                    <button type="button" class="nav-button prev-button" onclick="prevStep()">Vorige</button>
                    <button type="submit" class="nav-button submit-button">Offerte Aanvragen</button>
                </div>
            </fieldset>
        </form>
    </div>

    <script>
        // UBO Functions (no change needed in UBOtoevoegen, verwijderUBO, hernummerUbos logic from previous state)
        function UBOtoevoegen() {
            const uboContainer = document.getElementById('ubo-forms-container');
            if (!uboContainer) {
                console.error('Container element met id "ubo-forms-container" niet gevonden!');
                return;
            }
            const existingUbos = uboContainer.querySelectorAll('.ubo-section');
            const nextUboNumber = existingUbos.length + 1;
    
            if (nextUboNumber > 10) {
                alert("Je kunt maximaal 10 UBO-secties toevoegen.");
                return;
            }
    
            const templateHtml = `
                <div class="ubo-section">
                    <h4>UBO 1 / Statutair Bestuurder 1</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ubo1_voornamen">Volledige voornamen<span class="asterisk"></span></label>
                            <input type="text" id="ubo1_voornamen" name="ubo1_voornamen" required>
                        </div>
                        <div class="form-group" style="flex: 0.5;">
                            <label for="ubo1_tussenvoegsel">Tussenvoegsel(s)</label>
                            <input type="text" id="ubo1_tussenvoegsel" name="ubo1_tussenvoegsel">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="ubo1_achternaam">Eigen achternaam<span class="asterisk"></span></label>
                        <input type="text" id="ubo1_achternaam" name="ubo1_achternaam" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="ubo1_geboortedatum">Geboortedatum<span class="asterisk"></span></label>
                            <input type="date" id="ubo1_geboortedatum" name="ubo1_geboortedatum" required>
                        </div>
                        <div class="form-group">
                            <label for="ubo1_woonland">Woonland<span class="asterisk"></span></label>
                            <input type="text" id="ubo1_woonland" name="ubo1_woonland" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Type UBO<span class="asterisk">*</span></label>
                        <div class="radio-group">
                            <div><input type="radio" id="ubo1_type_eigendom" name="ubo1_type" value="eigendom" required><label for="ubo1_type_eigendom" class="radio-label">Op basis van eigendom</label></div>
                            <div><input type="radio" id="ubo1_type_zeggenschap" name="ubo1_type" value="zeggenschap"><label for="ubo1_type_zeggenschap" class="radio-label">Op basis van zeggenschap</label></div>
                            <div><input type="radio" id="ubo1_type_statutair" name="ubo1_type" value="statutair"><label for="ubo1_type_statutair" class="radio-label">Op basis van (statutair) bestuur</label></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="ubo1_adres">Volledige adres<span class="asterisk">*</span></label>
                        <input type="text" id="ubo1_adres" name="ubo1_adres" placeholder="Straatnaam Huisnr, Postcode Plaats" required>
                    </div>
                    <button type="button" onclick="verwijderUBO(this)" class="remove-ubo-button">Verwijder UBO ${nextUboNumber}</button>
                </div>
            `;
    
            let newUboHtml = templateHtml.replace(/ubo1_/g, `ubo${nextUboNumber}_`);
            newUboHtml = newUboHtml.replace(/UBO 1/g, `UBO ${nextUboNumber}`);
            newUboHtml = newUboHtml.replace(/Statutair Bestuurder 1/g, `Statutair Bestuurder ${nextUboNumber}`);
    
            const tempDiv = document.createElement('div');
            tempDiv.innerHTML = newUboHtml.trim();
            const newUboElement = tempDiv.firstElementChild;
    
            const hrSeparator = document.createElement('hr');
            hrSeparator.style.margin = '25px 0';
            hrSeparator.style.borderColor = '#eee';
            hrSeparator.classList.add('ubo-separator');
    
            uboContainer.appendChild(newUboElement);
            uboContainer.appendChild(hrSeparator);
    
            newUboElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
            const firstInput = newUboElement.querySelector('input[type="text"], input[type="date"]');
            if (firstInput) {
                 firstInput.focus();
            }
        }
    
        function verwijderUBO(buttonElement) {
            const uboSection = buttonElement.closest('.ubo-section');
            if (uboSection) {
                if (confirm('Weet je zeker dat je deze UBO wilt verwijderen?')) {
                    const nextElement = uboSection.nextElementSibling;
                    uboSection.remove();
                    if (nextElement && nextElement.tagName === 'HR' && nextElement.classList.contains('ubo-separator')) {
                        nextElement.remove();
                    }
                    hernummerUbos();
                }
            }
        }
    
        function hernummerUbos() {
            const uboContainer = document.getElementById('ubo-forms-container');
            if (!uboContainer) return;
            const existingUbos = uboContainer.querySelectorAll('.ubo-section');
            existingUbos.forEach((uboElement, index) => {
                const currentNumber = index + 1;
                const h4 = uboElement.querySelector('h4');
                if (h4) {
                    h4.textContent = `UBO ${currentNumber} / Statutair Bestuurder ${currentNumber}`;
                }
                const fields = uboElement.querySelectorAll('[id^="ubo"], [name^="ubo"], [for^="ubo"]');
                fields.forEach(field => {
                    if (field.id && field.id.startsWith('ubo')) {
                        field.id = field.id.replace(/^ubo\d+(_|$)/, `ubo${currentNumber}$1`);
                    }
                    if (field.name && field.name.startsWith('ubo')) {
                        field.name = field.name.replace(/^ubo\d+(_|$)/, `ubo${currentNumber}$1`);
                    }
                    if (field.tagName === 'LABEL' && field.htmlFor && field.htmlFor.startsWith('ubo')) {
                         field.htmlFor = field.htmlFor.replace(/^ubo\d+(_|$)/, `ubo${currentNumber}$1`);
                    }
                });
                const removeButton = uboElement.querySelector('.remove-ubo-button');
                if (removeButton) {
                     removeButton.textContent = `Verwijder UBO ${currentNumber}`;
                }
            });
        }
    
    
        // Header schaduw bij scrollen
        const mainHeader = document.getElementById('mainHeader');
        if (mainHeader) {
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    mainHeader.classList.add('scrolled');
                } else {
                    mainHeader.classList.remove('scrolled');
                }
            });
        }
    
        // JavaScript voor het multi-step formulier
        let currentStep = 0;
        const steps = Array.from(document.querySelectorAll('.form-step'));
        const progressBar = document.getElementById('progressBar');
        const progressLine = document.getElementById('progressLine');
        const stepIndicators = [];

         // Aannemer Functions (nieuw)
         let aannemerCount = 1; 
        function AannemerToevoegen() {
            const container = document.getElementById('aannemer-forms-container');
            if (!container) return;

            const existingAannemers = container.querySelectorAll('.aannemer-section');
            aannemerCount = existingAannemers.length + 1;

            if (aannemerCount > 5) { // Maximaal 5 aannemers
                alert("U kunt maximaal 5 aannemers opgeven.");
                return;
            }

            const newIdPrefix = `aannemer${aannemerCount}_`;
            const newAvbDetailsId = `${newIdPrefix}avbDetails`;

            const newSection = document.createElement('div');
            newSection.classList.add('aannemer-section');
            newSection.dataset.aannemerIndex = aannemerCount; // Voor referentie

            newSection.innerHTML = `
                <h4>Aannemer ${aannemerCount}</h4>
                <div class="form-group">
                    <label for="${newIdPrefix}naam">Naam van de aannemer<span class="asterisk">*</span></label>
                    <input type="text" id="${newIdPrefix}naam" name="${newIdPrefix}naam">
                </div>
                <div class="form-group">
                    <label for="${newIdPrefix}adres">Adresgegevens aannemer<span class="asterisk">*</span></label>
                    <input type="text" id="${newIdPrefix}adres" name="${newIdPrefix}adres" placeholder="Straat Huisnr, Postcode Plaats">
                </div>
                <div class="form-group">
                    <label for="${newIdPrefix}telefoon">Telefoonnummer aannemer</label>
                    <input type="tel" id="${newIdPrefix}telefoon" name="${newIdPrefix}telefoon">
                </div>
                <div class="form-group">
                    <label>Heeft deze aannemer een Bedrijfsaansprakelijkheidsverzekering (AVB)?<span class="asterisk">*</span></label>
                    <div class="radio-group">
                        <div><input type="radio" id="${newIdPrefix}avb_ja" name="${newIdPrefix}avb" value="ja" onclick="toggleConditional('${newAvbDetailsId}', true)"><label for="${newIdPrefix}avb_ja" class="radio-label">Ja</label></div>
                        <div><input type="radio" id="${newIdPrefix}avb_nee" name="${newIdPrefix}avb" value="nee" onclick="toggleConditional('${newAvbDetailsId}', false)" checked><label for="${newIdPrefix}avb_nee" class="radio-label">Nee</label></div>
                    </div>
                </div>
                <div id="${newAvbDetailsId}" class="conditional-section">
                    <div class="form-group">
                        <label for="${newIdPrefix}avb_maatschappij">Bij welke maatschappij?</label>
                        <input type="text" id="${newIdPrefix}avb_maatschappij" name="${newIdPrefix}avb_maatschappij">
                    </div>
                    <div class="form-group">
                        <label for="${newIdPrefix}avb_polisnr">Polisnummer</label>
                        <input type="text" id="${newIdPrefix}avb_polisnr" name="${newIdPrefix}avb_polisnr">
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="${newIdPrefix}avb_bedrag">Verzekerd bedrag</label>
                            <div class="input-group"><span class="currency-symbol">€</span><input type="number" id="${newIdPrefix}avb_bedrag" name="${newIdPrefix}avb_bedrag" step="any"></div>
                        </div>
                        <div class="form-group">
                            <label for="${newIdPrefix}avb_eigenrisico">Eigen risico p.g.</label>
                            <div class="input-group"><span class="currency-symbol">€</span><input type="number" id="${newIdPrefix}avb_eigenrisico" name="${newIdPrefix}avb_eigenrisico" step="any"></div>
                        </div>
                    </div>
                </div>
                <button type="button" class="remove-aannemer-button" onclick="verwijderAannemer(this)">Verwijder Aannemer ${aannemerCount}</button>
            `;
            container.appendChild(newSection);
            
            // Initialize conditional visibility for the new section's AVB details (should be hidden by default or based on 'nee' radio)
            toggleConditional(newAvbDetailsId, false); // Ensure AVB details are hidden initially
            
             // Vereiste velden instellen voor de nieuwe sectie (als de hoofdcontainer zichtbaar is)
            const aannemerContainer = document.getElementById('aannemerDetailsContainer');
            if (aannemerContainer && aannemerContainer.style.display === 'block') {
                setRequiredForAannemerSection(newSection, true);
            } else {
                 setRequiredForAannemerSection(newSection, false); // Anders uitschakelen
            }


            const firstInput = newSection.querySelector('input, select, textarea');
            if (firstInput) firstInput.focus();
            newSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function verwijderAannemer(buttonElement) {
            const sectionToRemove = buttonElement.closest('.aannemer-section');
            if (sectionToRemove) {
                sectionToRemove.remove();
                hernummerAannemers();
            }
        }

        function hernummerAannemers() {
            const container = document.getElementById('aannemer-forms-container');
            if (!container) return;
            const sections = container.querySelectorAll('.aannemer-section');
            aannemerCount = sections.length;

            sections.forEach((section, index) => {
                const newNumber = index + 1;
                const oldPrefixRegex = /aannemer\d+_/g;
                const newPrefix = `aannemer${newNumber}_`;
                const newAvbDetailsId = `${newPrefix}avbDetails`;

                section.dataset.aannemerIndex = newNumber;
                const h4 = section.querySelector('h4');
                if (h4) h4.textContent = `Aannemer ${newNumber}`;

                section.querySelectorAll('[id], [name], [for]').forEach(el => {
                    if (el.id && el.id.match(oldPrefixRegex)) el.id = el.id.replace(oldPrefixRegex, newPrefix);
                    if (el.name && el.name.match(oldPrefixRegex)) el.name = el.name.replace(oldPrefixRegex, newPrefix);
                    if (el.htmlFor && el.htmlFor.match(oldPrefixRegex)) el.htmlFor = el.htmlFor.replace(oldPrefixRegex, newPrefix);
                });
                
                // Update onclick for AVB radio buttons
                const avbJaRadio = section.querySelector(`input[id^="${newPrefix}avb_ja"]`);
                if (avbJaRadio) avbJaRadio.setAttribute('onclick', `toggleConditional('${newAvbDetailsId}', true)`);
                const avbNeeRadio = section.querySelector(`input[id^="${newPrefix}avb_nee"]`);
                if (avbNeeRadio) avbNeeRadio.setAttribute('onclick', `toggleConditional('${newAvbDetailsId}', false)`);


                const removeButton = section.querySelector('.remove-aannemer-button');
                if (removeButton) removeButton.textContent = `Verwijder Aannemer ${newNumber}`;
            });
             // Als er geen aannemers meer zijn (na verwijdering van de laatste), maak de eerste aannemer opnieuw aan
            if (sections.length === 0 && document.getElementById('aannemerDetailsContainer').style.display === 'block') {
                 AannemerToevoegen(); // Dit voegt Aannemer 1 weer toe
            }
        }

        function setRequiredForAannemerSection(sectionElement, required) {
            const inputs = sectionElement.querySelectorAll('input[name^="aannemer"], select[name^="aannemer"], textarea[name^="aannemer"]');
            inputs.forEach(input => {
                // Alleen basisvelden van aannemer verplicht maken, AVB-details zijn conditioneel
                if (input.name.endsWith("_naam") || input.name.endsWith("_adres") || input.name.endsWith("_avb")) {
                    if (required) {
                        input.setAttribute('required', '');
                        input.disabled = false;
                    } else {
                        input.removeAttribute('required');
                        input.disabled = true;
                         if (input.type === 'radio') {
                           // input.checked = false; // Niet resetten, alleen disablen
                        } else if (input.type !== 'button') {
                           // input.value = ''; // Niet resetten, alleen disablen
                        }
                    }
                }
            });
             // Behandel de AVB radio's apart voor 'required'
            const avbRadios = sectionElement.querySelectorAll(`input[name="${sectionElement.dataset.aannemerIndex ? 'aannemer'+sectionElement.dataset.aannemerIndex : 'aannemer1'}_avb"]`);
            if (required) {
                 avbRadios.forEach(r => { r.setAttribute('required',''); r.disabled = false; });
            } else {
                 avbRadios.forEach(r => { r.removeAttribute('required'); r.disabled = true; });
            }
        }
    
    

    
        function initializeProgressBar() {
            steps.forEach((step, index) => {
                const stepIndicator = document.createElement('div');
                stepIndicator.classList.add('progress-step');
    
                const stepNumberSpan = document.createElement('span');
                stepNumberSpan.classList.add('step-number');
                stepNumberSpan.textContent = index + 1;
                stepIndicator.appendChild(stepNumberSpan);
    
                const stepName = step.dataset.stepName || `Stap ${index + 1}`;
                const tooltip = document.createElement('span');
                tooltip.classList.add('tooltip-text');
                tooltip.textContent = stepName;
                stepIndicator.appendChild(tooltip);
    
                progressBar.appendChild(stepIndicator);
                stepIndicators.push(stepIndicator);
            });
            updateProgressBar();
        }
    
        function updateProgressBar() {
            stepIndicators.forEach((indicator, index) => {
                indicator.classList.remove('active', 'completed');
                const stepNumberElement = indicator.querySelector('.step-number');
                if (stepNumberElement) stepNumberElement.style.display = 'inline-block';
                indicator.style.backgroundColor = 'var(--progress-step-inactive-bg)';
    
                if (index === currentStep) {
                    indicator.classList.add('active');
                    indicator.style.backgroundColor = 'var(--progress-step-active-bg)';
                }
                if (index < currentStep) {
                    indicator.classList.add('completed');
                    if (stepNumberElement) stepNumberElement.style.display = 'none';
                }
            });
            const progressPercentage = (steps.length > 1) ? (currentStep / (steps.length - 1)) * 100 : 0;
            progressLine.style.width = `${progressPercentage}%`;
        }
    
        function showStep(stepIndex) {
            steps.forEach((step, index) => {
                step.classList.toggle('active', index === stepIndex);
            });
            if (progressBar) {
                 window.scrollTo({ top: progressBar.offsetTop - 20, behavior: 'smooth' });
            }
            updateProgressBar();
        }
    
        function validateCurrentStep() {
            const currentStepFields = steps[currentStep].querySelectorAll('[required]:not(:disabled)');
            let allValid = true;
            currentStepFields.forEach(field => {
                let parent = field.parentElement;
                let isVisible = true;
                while (parent) {
                    if (parent.style.display === 'none') { // Algemenere check voor verborgen elementen
                        isVisible = false;
                        break;
                    }
                    if (parent.classList && parent.classList.contains('form-step') && !parent.classList.contains('active')) {
                         isVisible = false;
                         break;
                    }
                    parent = parent.parentElement;
                }
    
                if (!isVisible) return; // Sla validatie over als het veld of zijn container verborgen is
    
                if ((field.type === 'radio' || field.type === 'checkbox')) {
                    const name = field.name;
                    const groupElement = field.closest('.radio-group') || field.closest('.checkbox-group') || field.closest('.form-group');
                    if (!document.querySelector(`input[name="${name}"]:checked`)) {
                        allValid = false;
                        if (groupElement) {
                            groupElement.style.setProperty('border', '1px solid var(--danger-color)', 'important');
                            groupElement.style.padding = '5px';
                            groupElement.style.borderRadius = '4px';
                        }
                    } else {
                        if (groupElement) {
                            groupElement.style.border = 'none';
                            groupElement.style.padding = '0';
                        }
                    }
                } else if (!field.value.trim()) {
                    allValid = false;
                    field.style.borderColor = 'var(--danger-color)';
                    field.style.boxShadow = '0 0 0 3px rgba(220, 38, 38, 0.25)';
                } else {
                     field.style.borderColor = 'var(--form-border-color)';
                     if (document.activeElement === field) {
                        field.style.boxShadow = '0 0 0 3px rgba(59, 130, 246, 0.25)';
                     } else {
                        field.style.boxShadow = 'none';
                     }
                }
            });
            return allValid;
        }
    
    
        function nextStep() {
            if (!validateCurrentStep()) {
                 alert('Vul alstublieft alle verplichte velden (*) correct in om door te gaan.');
                const firstInvalid = steps[currentStep].querySelector('[required]:invalid, [style*="border-color: var(--danger-color)"]');
                if (firstInvalid) {
                    firstInvalid.focus();
                    firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
                return;
            }
            if (currentStep < steps.length - 1) {
                currentStep++;
                showStep(currentStep);
            }
        }
    
        function prevStep() {
            if (currentStep > 0) {
                const currentStepErrorFields = steps[currentStep].querySelectorAll('[style*="border-color: var(--danger-color)"]');
                currentStepErrorFields.forEach(field => {
                    field.style.borderColor = 'var(--form-border-color)';
                    field.style.boxShadow = 'none';
                });
                const currentStepErrorGroups = steps[currentStep].querySelectorAll('.form-group[style*="border: 1px solid var(--danger-color)"], .radio-group[style*="border: 1px solid var(--danger-color)"], .checkbox-group[style*="border: 1px solid var(--danger-color)"]');
                 currentStepErrorGroups.forEach(group => {
                    group.style.border = 'none';
                    group.style.padding = '0';
                });
    
                currentStep--;
                showStep(currentStep);
            }
        }
    
        function showLinkedText(elementId) {
            const element = document.getElementById(elementId);
            if(element) {
                element.classList.add('visible');
                // element.focus(); // Kan ongewenst zijn bij laden van pagina
            }
        }
        function hideLinkedText(elementId) {
             const element = document.getElementById(elementId);
            if(element) {
                element.classList.remove('visible');
                element.value = '';
            }
        }
    
        function toggleConditional(elementId, show) {
            const element = document.getElementById(elementId);
            if (element) {
                element.style.display = show ? 'block' : 'none';
                const childInputs = element.querySelectorAll('input, select, textarea, button');
    
                childInputs.forEach(input => {
                    if (!show) {
                        if (input.type === 'radio' || input.type === 'checkbox') {
                            input.checked = false;
                        } else if (input.tagName === 'SELECT') {
                            input.selectedIndex = 0;
                            if (input.getAttribute('onchange') && input.getAttribute('onchange').includes('toonAndersVeld')) {
                                const targetIdMatch = input.getAttribute('onchange').match(/toonAndersVeld\s*\(\s*this\s*,\s*['"]([^'"]+)['"]\s*\)/);
                                if (targetIdMatch && targetIdMatch[1]) {
                                    const andersVeld = document.getElementById(targetIdMatch[1]);
                                    if (andersVeld) {
                                        andersVeld.style.display = 'none';
                                        const andersInput = andersVeld.querySelector('input');
                                        if (andersInput) {
                                          andersInput.value = '';
                                          andersInput.disabled = true;
                                        }
                                    }
                                }
                            }
                        } else if (input.tagName.toLowerCase() !== 'button') {
                            input.value = '';
                        }
                        if (input.hasAttribute('required')) {
                           input.dataset.wasRequired = 'true';
                           input.removeAttribute('required');
                        }
                        input.disabled = true;
    
                        const onclickAttr = input.getAttribute('onclick');
                        if (onclickAttr) {
                            if (onclickAttr.includes('toggleConditional')) {
                                const match = onclickAttr.match(/toggleConditional\s*\(\s*['"]([^'"]+)['"]/);
                                if (match && match[1]) {
                                    toggleConditional(match[1], false);
                                }
                            }
                            if (onclickAttr.includes('showLinkedText')) {
                                 const match = onclickAttr.match(/showLinkedText\s*\(\s*['"]([^'"]+)['"]/);
                                 if(match && match[1]) hideLinkedText(match[1]);
                            }
                            if (input.id === 'ookOpPalen_nee' && onclickAttr.includes("showLinkedText('andereFunderingswijze')")) {
                                hideLinkedText('andereFunderingswijze');
                            }
                        }
                    } else {
                        input.disabled = false;
                        if (input.dataset.wasRequired === 'true') {
                            input.setAttribute('required', '');
                        }
                    }
                });
            }
        }
    
        // --- START NIEUWE FUNCTIE VOOR REDEN LATE START ---
        function setupRedenLateStartToggle() {
            const ingangsdatumInput = document.getElementById('ingangsdatumVerzekering');
            const redenContainer = document.getElementById('redenLateStartContainer');
            const redenTextarea = document.getElementById('redenLateStart');
    
            if (!ingangsdatumInput || !redenContainer || !redenTextarea) {
                console.warn("Benodigde elementen voor 'redenLateStart' functionaliteit niet gevonden (ingangsdatumVerzekering, redenLateStartContainer, redenLateStart).");
                return;
            }
    
            function toggleRedenLateStartVisibility() {
                const gekozenDatumString = ingangsdatumInput.value;
    
                if (!gekozenDatumString) { // Geen datum gekozen
                    redenContainer.style.display = 'none';
                    redenTextarea.required = false;
                    return;
                }
    
                const gekozenDatum = new Date(gekozenDatumString);
                gekozenDatum.setHours(0, 0, 0, 0); // Tijdcomponent negeren voor eerlijke dagvergelijking
    
                const vandaag = new Date();
                vandaag.setHours(0, 0, 0, 0); // Tijdcomponent negeren
    
                // Toon veld als gekozen ingangsdatum VOOR vandaag ligt
                if (gekozenDatum < vandaag) {
                    redenContainer.style.display = 'block';
                    redenTextarea.required = true;
                } else {
                    redenContainer.style.display = 'none';
                    redenTextarea.required = false;
                    redenTextarea.value = ''; // Optioneel: maak het veld leeg als het verborgen wordt
                }
            }
    
            ingangsdatumInput.addEventListener('change', toggleRedenLateStartVisibility);
            ingangsdatumInput.addEventListener('input', toggleRedenLateStartVisibility); // Voor directere reactie bij sommige browsers
    
            toggleRedenLateStartVisibility(); // Roep eenmaal aan bij laden voor het geval er al een datum is
        }
        // --- EINDE NIEUWE FUNCTIE VOOR REDEN LATE START ---
    
    
        document.addEventListener('DOMContentLoaded', () => {
            if(progressBar) {
              initializeProgressBar();
            }
            showStep(currentStep);
    
            // --- NIEUWE FUNCTIE HIER AANROEPEN ---
            setupRedenLateStartToggle();
            // --- EINDE AANROEP ---
    
            function setupInitialConditionals(radioGroupName, detailsId, subDetailsIdCondRadioName, subDetailsId) {
                const mainRadios = document.getElementsByName(radioGroupName);
                let mainCheckedValue = null;
                mainRadios.forEach(radio => { if(radio.checked) mainCheckedValue = radio.value; });
    
                if (mainRadios.length > 0) {
                    const showMainDetails = mainCheckedValue === 'ja' || (radioGroupName === 'werkDoorAannemer' && (mainCheckedValue === 'geheel' || mainCheckedValue === 'gedeeltelijk'));
                    toggleConditional(detailsId, showMainDetails);
    
                    if (showMainDetails && subDetailsIdCondRadioName && subDetailsId) {
                        const subRadios = document.getElementsByName(subDetailsIdCondRadioName);
                        let subCheckedValue = null;
                        subRadios.forEach(radio => { if(radio.checked) subCheckedValue = radio.value; });
                        toggleConditional(subDetailsId, subCheckedValue === 'ja');
                    } else if (subDetailsId) {
                        toggleConditional(subDetailsId, false);
                    }
                } else {
                     toggleConditional(detailsId, false);
                     if (subDetailsId) toggleConditional(subDetailsId, false);
                }
            }
    
            setupInitialConditionals('onderhoudstermijnOvereen', 'onderhoudstermijnOvereenDetails', 'onderhoudstermijnMeeVerzekeren', 'onderhoudstermijnDuurDetails');
            setupInitialConditionals('bedrijfsschade_meeverzekeren', 'bedrijfsschadeDetails');
            setupInitialConditionals('sloopwerk', 'sloopwerkDetails');
            setupInitialConditionals('bemaling', 'bemalingDetails');
            setupInitialConditionals('gravenNabijFundering', 'gravenNabijFunderingDetails');
            setupInitialConditionals('paalfundering', 'paalfunderingDetails');
    
            const paalfunderingDetails = document.getElementById('paalfunderingDetails');
            if (paalfunderingDetails && paalfunderingDetails.style.display === 'block') {
                const bouwwerkenRadios = document.getElementsByName('bouwwerkenBinnen15m');
                let bouwwerkenCheckedValue = null;
                bouwwerkenRadios.forEach(r => { if(r.checked) bouwwerkenCheckedValue = r.value; });
                toggleConditional('bouwwerkenBinnen15mDetails', bouwwerkenCheckedValue === 'ja');
    
                const bouwwerkenBinnen15mDetails = document.getElementById('bouwwerkenBinnen15mDetails');
                if (bouwwerkenBinnen15mDetails && bouwwerkenBinnen15mDetails.style.display === 'block') {
                    const ookOpPalenRadios = document.getElementsByName('ookOpPalen');
                    let ookOpPalenCheckedValue = null;
                    ookOpPalenRadios.forEach(r => { if(r.checked) ookOpPalenCheckedValue = r.value; });
                    const showAndereFunderingswijze = ookOpPalenCheckedValue === 'nee';
                    toggleConditional('andereFunderingswijzeDetails', showAndereFunderingswijze);
                    if (showAndereFunderingswijze) {
                        showLinkedText('andereFunderingswijze');
                    } else {
                        hideLinkedText('andereFunderingswijze');
                    }
                } else {
                     toggleConditional('andereFunderingswijzeDetails', false);
                     hideLinkedText('andereFunderingswijze');
                }
            } else {
                toggleConditional('bouwwerkenBinnen15mDetails', false);
                toggleConditional('andereFunderingswijzeDetails', false);
                hideLinkedText('andereFunderingswijze');
            }
    
    
            setupInitialConditionals('grondkering', 'grondkeringDetails');
            setupInitialConditionals('arbeidsloon_meeverzekeren', 'arbeidsloonDetails');
    
            const werkDoorAannemerChecked = document.querySelector('input[name="werkDoorAannemer"]:checked');
            if(werkDoorAannemerChecked){
                const showAannemerDetails = werkDoorAannemerChecked.value === 'geheel' || werkDoorAannemerChecked.value === 'gedeeltelijk';
                toggleConditional('aannemerDetails', showAannemerDetails);
                if(showAannemerDetails){
                    const aannemerAvbJaChecked = document.querySelector('input[name="aannemer_avb"][value="ja"]:checked');
                    toggleConditional('aannemerAvbDetails', !!aannemerAvbJaChecked);
                } else {
                    toggleConditional('aannemerAvbDetails', false);
                }
            } else {
                toggleConditional('aannemerDetails', false);
                toggleConditional('aannemerAvbDetails', false);
            }
    
            setupInitialConditionals('elders_ondergebracht', 'eldersOndergebrachtDetails');
    
            document.querySelectorAll('.inline-text-input').forEach(textField => {
                const radioId = textField.id.replace('Text', 'Radio');
                const linkedRadio = document.getElementById(radioId);
                if (linkedRadio && linkedRadio.checked) {
                    textField.classList.add('visible');
                } else {
                    if (textField.id !== 'andereFunderingswijze') {
                         textField.classList.remove('visible');
                    }
                }
            });
    
            document.querySelectorAll('select[onchange*="toonAndersVeld"]').forEach(selectElement => {
                const targetIdMatch = selectElement.getAttribute('onchange').match(/toonAndersVeld\s*\(\s*this\s*,\s*['"]([^'"]+)['"]\s*\)/);
                if (targetIdMatch && targetIdMatch[1]) {
                    toonAndersVeld(selectElement, targetIdMatch[1]);
                }
            });
        });
    
        function toonAndersVeld(selectElement, targetElementId) {
            var selectedValue = selectElement.value;
            var targetElement = document.getElementById(targetElementId);
    
            if (targetElement) {
                const inputInside = targetElement.querySelector('input[type="number"], input[type="text"]');
                if (selectedValue && selectedValue.toLowerCase() === 'anders') {
                    targetElement.style.display = 'flex';
                    if (inputInside) {
                        inputInside.disabled = false;
                    }
                } else {
                    targetElement.style.display = 'none';
                    if (inputInside) {
                        inputInside.value = '';
                        inputInside.disabled = true;
                    }
                }
            }
        }
    
        // document.getElementById('carOfferteForm').addEventListener('submit', function(event) { ... }); // Submit logic niet nodig voor deze vraag
        </script>
        <!-- Autofill script (no changes needed here from previous state) -->
        <script>
            function autoFillFormForTesting() {
                // Helper functions (simplified for brevity, assume global functions are used from the main script)
                function _toggleConditional(elementId, show) {
                    if (typeof toggleConditional === "function") {
                        toggleConditional(elementId, show);
                    } else {
                        console.warn(`toggleConditional function not found. Cannot toggle ${elementId}.`);
                    }
                }
                function _toonAndersVeld(selectElementOrId, targetElementId) {
                    if (typeof toonAndersVeld === "function") {
                        let selectElem = typeof selectElementOrId === 'string' ? document.getElementById(selectElementOrId) : selectElementOrId;
                        if (selectElem) {
                            toonAndersVeld(selectElem, targetElementId);
                        } else {
                            console.warn(`Select element ${selectElementOrId} not found for _toonAndersVeld.`);
                        }
                    } else {
                        console.warn(`toonAndersVeld function not found.`);
                    }
                }
                 function _showLinkedText(elementId) {
                    if (typeof showLinkedText === "function") {
                        showLinkedText(elementId);
                    } else {
                        console.warn(`showLinkedText function not found. Cannot show ${elementId}.`);
                    }
                }
                function _hideLinkedText(elementId) {
                    if (typeof hideLinkedText === "function") {
                        hideLinkedText(elementId);
                    } else {
                        console.warn(`hideLinkedText function not found. Cannot hide ${elementId}.`);
                    }
                }
        
        
                // --- Stap 1: Bedrijfsgegevens ---
                document.getElementById('kvkNummer').value = '12345678';
                document.getElementById('rechtsvorm').value = 'Besloten Vennootschap';
                document.getElementById('naamVoorletters').value = 'T. Ester';
                document.getElementById('geslachtMan').checked = true;
                document.getElementById('geboortedatum').value = '1985-05-15';
                document.getElementById('bedrijfsnaam').value = 'Test Coöperatie Nederland';
                document.getElementById('handelsnaam').value = 'Test & Co';
                document.getElementById('telefoonnummer').value = '0611223344';
                document.getElementById('emailadres').value = 'tester@example.nl';
                document.getElementById('postadres').value = 'Testweg 123, 1000 AA Amsterdam';
        
                // --- Stap 2: Werkdetails ---
                document.getElementById('startWerkzaamheden').value = new Date(new Date().setDate(new Date().getDate() + 7)).toISOString().split('T')[0];
                // Voorbeeld: zet ingangsdatum op gisteren om het 'redenLateStart' veld te triggeren
                const gisteren = new Date();
                gisteren.setDate(gisteren.getDate() - 1);
                document.getElementById('ingangsdatumVerzekering').value = gisteren.toISOString().split('T')[0];
                
                // Trigger de 'change' event handmatig na het instellen van de waarde voor ingangsdatumVerzekering
                // om de setupRedenLateStartToggle logica (indien aanwezig en correct) te activeren.
                const ingangsdatumInputEvent = document.getElementById('ingangsdatumVerzekering');
                if(ingangsdatumInputEvent) {
                    const event = new Event('change', { bubbles: true });
                    ingangsdatumInputEvent.dispatchEvent(event);
                }
                // Als 'redenLateStart' zichtbaar is (door bovenstaande dispatch), vul hem dan ook in
                const redenLateStartContainer = document.getElementById('redenLateStartContainer');
                if (redenLateStartContainer && redenLateStartContainer.style.display === 'block') {
                    document.getElementById('redenLateStart').value = 'Administratieve verwerking duurde langer dan verwacht.';
                }
                // document.getElementById('omschrijvingWerk').value = 'Renovatie en uitbreiding kantoorpand Testweg'; // Dit veld bestaat niet in de HTML, dus verwijderd.
                document.getElementById('duurBouwMaanden').value = '9';
        
                document.getElementById('onderhoudstermijnOvereen_ja').checked = true; _toggleConditional('onderhoudstermijnOvereenDetails', true);
                document.getElementById('onderhoudstermijnMeeVerzekeren_ja').checked = true; _toggleConditional('onderhoudstermijnDuurDetails', true);
                document.getElementById('duurOnderhoud_6').checked = true;
        
                document.getElementById('aanneemsom').value = '750000';
                document.getElementById('btw_inclusief').checked = true;
                document.getElementById('inc_honoraria').checked = true;
                document.getElementById('inc_opdrachtgeverWerk').checked = true;
        
                // --- Stap 3: Verzekerde Sommen & Risico's ---
                const aansprakelijkheidSelect = document.querySelector('select[name="aansprakelijkheid_som"]');
                if (aansprakelijkheidSelect) aansprakelijkheidSelect.value = '1250000';
                
                document.getElementById('bestaande_eigendommen_som').value = '50000'; _toonAndersVeld(document.getElementById('bestaande_eigendommen_som'), 'anders_bestaand_eigendommen_input');
                
                document.getElementById('Hulpmateriaal').value = 'Anders'; _toonAndersVeld(document.getElementById('Hulpmateriaal'), 'anders_Hulpmateriaal_input');
                const andersHulpmateriaalVal = document.querySelector('input[name="anders_Hulpmateriaal_val"]');
                if(andersHulpmateriaalVal) andersHulpmateriaalVal.value = '30000';
        
                document.getElementById('Eigen_risico').value = '2500'; _toonAndersVeld(document.getElementById('Eigen_risico'), 'anders_Eigen_risico_input');
        
                document.getElementById('bedrijfsschade_nee').checked = true; _toggleConditional('bedrijfsschadeDetails', false);
        
                // --- Stap 4: Constructiedetails ---
                document.getElementById('locatieWerk').value = 'Centrum Teststad, vlakbij station';
                document.getElementById('aardGebouw_metaal').checked = true; _hideLinkedText('aardGebouwAndersText');
        
                document.getElementById('sloopwerk_nee').checked = true; _toggleConditional('sloopwerkDetails', false);
                document.getElementById('bemaling_nee').checked = true; _toggleConditional('bemalingDetails', false);
                document.getElementById('gravenNabijFundering_nee').checked = true; _toggleConditional('gravenNabijFunderingDetails', false);
                document.getElementById('kelderZwembad_nee').checked = true;
        
                document.getElementById('paalfundering_ja').checked = true; _toggleConditional('paalfunderingDetails', true);
                    const funderingsadviesPaalJa = document.querySelector('input[name="funderingsadviesPaal"][value="ja"]');
                    if (funderingsadviesPaalJa) funderingsadviesPaalJa.checked = true;
                    const paalsysteemGeboord = document.querySelector('input[name="paalsysteem"][value="geboord"]');
                    if (paalsysteemGeboord) paalsysteemGeboord.checked = true;
                    document.getElementById('bouwwerkenBinnen15m_ja').checked = true; _toggleConditional('bouwwerkenBinnen15mDetails', true);
                        const eigenaarOpdrachtgever = document.querySelector('input[name="eigenaarBouwwerk"][value="opdrachtgever"]');
                        if (eigenaarOpdrachtgever) eigenaarOpdrachtgever.checked = true;
                        document.getElementById('afstandDichtstbijzijndeBouwwerk').value = '8';
                        document.getElementById('ookOpPalen_ja').checked = true; _toggleConditional('andereFunderingswijzeDetails', false); _hideLinkedText('andereFunderingswijze');
        
                document.getElementById('grondkering_nee').checked = true; _toggleConditional('grondkeringDetails', false);
                document.getElementById('funderingsherstel_nee').checked = true;
        
                // --- Stap 5: Uitvoering & Aannemer ---
                document.getElementById('arbeidsloon_nee').checked = true; _toggleConditional('arbeidsloonDetails', false);
        
                // Kies 'Geheel' voor "Wordt het werk door een aannemer uitgevoerd?"
                document.getElementById('werkDoorAannemer_geheel').checked = true;
                _toggleConditional('aannemerDetailsContainer', true); // Toon aannemer details sectie
                _toggleConditional('aannemerDetailopmerking', false); // Verberg 'opmerking' sectie (voor 'nee')
        
                    // Vul gegevens in voor de eerste aannemer (aannemer1)
                    document.getElementById('aannemer1_naam').value = 'Prima Bouwers B.V.';
                    document.getElementById('aannemer1_adres').value = 'Boulevard 5, 2000 BB Testdorp';
                    document.getElementById('aannemer1_telefoon').value = '0209876543';
                    document.getElementById('aannemer1_avb_ja').checked = true; _toggleConditional('aannemer1_avbDetails', true);
                        document.getElementById('aannemer1_avb_maatschappij').value = 'ZekerVerzekerd N.V.';
                        document.getElementById('aannemer1_avb_polisnr').value = 'AVB-TEST-001';
                        document.getElementById('aannemer1_avb_bedrag').value = '5000000';
                        document.getElementById('aannemer1_avb_eigenrisico').value = '500';
                document.getElementById('overige_opmerkingen_beoordeling').value = 'Dit is een automatische invulling voor testdoeleinden.';
        
                // --- Stap 6: UBO & Afronding ---
                document.getElementById('ubo1_voornamen').value = 'Anna B. C.';
                document.getElementById('ubo1_tussenvoegsel').value = 'van der';
                document.getElementById('ubo1_achternaam').value = 'Voorbeeld';
                document.getElementById('ubo1_geboortedatum').value = '1978-11-22';
                document.getElementById('ubo1_woonland').value = 'Nederland';
                const ubo1TypeStatutair = document.querySelector('input[name="ubo1_type"][value="statutair"]');
                if (ubo1TypeStatutair) ubo1TypeStatutair.checked = true;
                document.getElementById('ubo1_adres').value = 'Ubolaan 1, 1234 UB Ubodorp';
        
                document.getElementById('elders_ondergebracht_nee').checked = true; _toggleConditional('eldersOndergebrachtDetails', false);
        
                // De verklaringen worden bewust niet aangevinkt door dit script, zoals vermeld in de alert.
                // Indien gewenst, kunnen ze hier worden aangevinkt:
                // document.querySelector('input[name="verklaring_waarheid"]').checked = true;
                // document.querySelector('input[name="verklaring_wijziging_ubo"]').checked = true;
        
                console.log("Formulier automatisch ingevuld voor testen.");
                alert("Formulier is automatisch ingevuld. 'Ingangsdatum verzekering' is op gisteren gezet om het 'redenLateStart' veld te tonen (indien correct geïmplementeerd). UBO verklaringen zijn nog niet aangevinkt.");
            }
        
            document.addEventListener('DOMContentLoaded', function() {
                const urlParams = new URLSearchParams(window.location.search);
                if (urlParams.get('autofill') === 'true') {
                    // Wacht een klein beetje zodat eventuele andere DOMContentLoaded scripts (zoals initial conditionals) kunnen draaien
                    setTimeout(function() {
                        try {
                            autoFillFormForTesting();
                        } catch (e) {
                            console.error("Fout bij automatisch invullen:", e);
                            alert("Fout bij autofill. Check console.");
                        }
                    }, 100); // 100ms delay, kan aangepast worden indien nodig
                }
            });
        </script>
</body>
</html>
